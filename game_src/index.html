<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
            .col-md-12 {
                border: 2px solid black;
                border-radius: 10px 10px 10px 10px;
                margin: 5px;
            }
            .center {
                text-align: center;
            }
            .campo {
              margin-bottom: 25px;
              background-color: #ffcc00;
              padding: 1px;
              height: 500px;
            }
            .campo img {position: relative; float: left }
            .table-no-border>thead>tr>th, 
            .table-no-border>tbody>tr>th, 
            .table-no-border>tfoot>tr>th, 
            .table-no-border>thead>tr>td, 
            .table-no-border>tbody>tr>td, 
            .table-no-border>tfoot>tr>td {
              border-top: none; 
            }
            .marginpadding {
              margin: 0;
              padding: 0;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Alla scoperta dell'informatica</a>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- Example row of columns -->
      <div class="row"><h1 class="center">Alla scoperta dell'informatica</h1></div>
      <div class="row" id="campo_totale">
        <div class="col-md-12 marginpadding" id="contenitore_campo_console">
          <div class="col-md-8">
            <h2 class="center">Campo di gioco</h2>
            <div class="campo">
            </div>
          </div>
          <div class="col-md-4">  
            <h2 class="center">Console</h2>
            <p>campo descrizione inserisci comando</p>
            <p class="center"><input type="text" class="form-control" id="comando"> <br /> <a class="btn btn-default" href="#" role="button" onclick="parseCommand()">testo esegui comando</a> <a class="btn btn-default" href="#" role="button">testo cancella comando</a></p>
            <p><h2 class="center">Testo log eventi</h2><div id="log_eventi" style="height: 310px; overflow: scroll;"><p>campo spiegazione errori</p></div></p>
          </div>
        </div>
      </div>

      <hr>

      <footer>
        <p>&copy; Caroti Rubens e Daniel Vedovato 2014</p>
      </footer>
    </div> <!-- /container -->        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
        <script>window.jQuery || document.write('<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"><\/script>')</script>

        <script src="js/vendor/bootstrap.min.js"></script>

        <script src="js/main.js"></script>

        <script>

          var codice_campo_console = $('#campo_totale').html();
          global_position = "";
          var global_i = 0;
          var global_j = 0;
          var immagine = '<img id="personaggio" src="http://icons.iconarchive.com/icons/itzikgur/my-seven/32/Girls-Blue-Dress-icon.png" style="margin: 0; padding: 0;">';
          d = new Date();

          function caricaPersonaggio(){
            content = '<div class="table-responsive"><table id="tabella_campo" class="table table-no-border">';
            for (i = 0; i < 14; i++) {
              content += "<tr></tr>";
              for (j = 0; j < 16; j++) {
                content += "<td id='" + i + "-" + j + "'></td>";
              };
            };
            content += "</table></div>";
            $('.campo').append(content);

            //genero i e j random
            //righe
            i = Math.floor(Math.random() * 13) + 0;
            //colonne
            j = Math.floor(Math.random() * 15) + 0;

            global_i = i;
            global_j = j;

            var position = i+"-"+j;
            global_position = position;

            $("#"+position).html("<td id='"+position+"'>" + immagine + "</td>");
          }

          function chiudiregole(){
            $('#campo_totale').html(codice_campo_console);
            caricaPersonaggio()
          }

          function carica_div_preload(){
            $('#contenitore_campo_console').html('<div id="div_regole" style="background-color: red; height: 500px; width: 100%; display: none;" class="center"><h1 class="center marginpadding">descrizione regole gioco</h1><p style="padding: 10;">Testo delle regole<p><p><a class="btn btn-default" href="#" role="button" onclick="chiudiregole()">testo chiudi regole</a></p></div>');

            $('#div_regole').fadeIn(3500);
          }

          function parseCommand(){
            var comando = $("#comando").val();
            comando = $.trim(comando);
            
            var azione = comando.substring(0,comando.indexOf("("));
            var passi = comando.substring(comando.indexOf("(")+1,comando.indexOf(")"));
            
			datetext = d.toTimeString();
            datetext = datetext.split(' ')[0];
			
            if ((azione != "sinistra") && (azione != "destra") && (azione != "su") && (azione != "giu")) {
              $("#log_eventi").append(datetext + ": <b style='color: red;'>" + comando + "*</b><br />");
            } else {
              {
              if (azione = "sinistra"){
                for (j = 0; j < parseInt(passi)+1; j++) {
                  $("#personaggio").fadeOut(1500);
				  $("#"+global_position).html("*");
                  $("#"+global_i+"-"+((global_j) - j)).html(immagine).fadeIn(1000);  
                  global_position = (global_i+"-"+((global_j) - j));
				  $("#log_eventi").append(datetext + ": <b style='color: blue;'>" + global_position + "*</b><br />");
                }
              }
            }
            $("#log_eventi").append(datetext + ": <b>" + comando +" "+ global_position + "</b><br />");
            }
          }

          $(document).ready(function() {
            carica_div_preload()
            //carico personaggio
            //caricaPersonaggio();
          });
        </script>
    </body>
</html>
